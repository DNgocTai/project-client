import './polyfills.server.mjs';
import{d as ze,e as Ee,f as be,g as ye,h as xe,i as Te,j as ve,k as De,l as Se,m as Ne,n as Me,o as Ve,p as Fe,q as we,r as Ae}from"./chunk-KREXQVCC.mjs";import{a as Ce}from"./chunk-D35C2CAA.mjs";import{d as fe}from"./chunk-BF3DVIIK.mjs";import{$ as le,I as ne,Q as re,R as oe,_ as ae,aa as se,ba as me,ca as ce,da as pe,ea as ue,fa as de,ga as he,ha as ge,o as L,pa as _e,q as R,r as B,s as H,u as $,v as G}from"./chunk-I33TF6FU.mjs";import"./chunk-MYPL3S4U.mjs";import{C as I,D as P,ta as j}from"./chunk-MTOZBATF.mjs";import"./chunk-ULKW5OLO.mjs";import"./chunk-LWZVMZIC.mjs";import{h as q,i as U,k as X,l as W,o as J,p as K,r as Q,s as Y,v as Z,w as ee,x as te,z as ie}from"./chunk-NL7WNEJB.mjs";import{$ as N,$a as v,$b as w,Bb as E,Cc as O,Ga as m,Ha as b,Pa as p,Rb as Pe,Wa as C,Xa as i,Ya as n,Za as h,_a as T,_b as F,ab as D,db as u,ea as f,fa as z,fb as d,ib as g,ic as A,jb as a,kb as y,lb as S,ob as V,pc as k,wa as M}from"./chunk-QBAPEAMH.mjs";import{a as x}from"./chunk-YELSAYKL.mjs";ie();k();Pe();ie();k();function Le(r,s){if(r&1){let t=D();i(0,"tr")(1,"td"),h(2,"img",17),n(),i(3,"td",18),a(4),n(),i(5,"td",18),a(6),n(),i(7,"td",18),a(8),n(),i(9,"td",18)(10,"app-switch",19),u("click",function(){let o=f(t).$implicit,c=d();return z(c.toggleActive(o))}),n()(),i(11,"td",18)(12,"a")(13,"button",20),u("click",function(){let o=f(t).$implicit,c=d();return z(c.patchValue(o))}),h(14,"span",21),a(15," S\u1EEDa "),n()(),h(16,"nz-divider",22),i(17,"a")(18,"button",23),u("nzOnConfirm",function(){let o=f(t).$implicit,c=d();return z(c.delete(o._id))}),h(19,"span",24),n()()()()}if(r&2){let t=s.$implicit;m(2),p("src",t.avatarUrl||"../../../assets/images/categories/unknown.png",M)("alt",t.name),m(2),y(t.name),m(2),y(t.title),m(2),S(" ",(t.product==null?null:t.product.length)>0?t.product.length:"Tr\u1ED1ng"," "),m(2),p("switchValue",t.status)}}function Re(r,s){if(r&1&&a(0),r&2){let t=d();y(t.isEdit?"Ch\u1EC9nh s\u1EEDa danh m\u1EE5c":"Th\xEAm danh m\u1EE5c")}}function Be(r,s){r&1&&(T(0),a(1,"H\xE3y nh\u1EADp t\xEAn danh m\u1EE5c!"),v())}function He(r,s){if(r&1&&C(0,Be,2,0,"ng-container",32),r&2){let t=s.$implicit;p("ngIf",t.hasError("required"))}}function $e(r,s){r&1&&(T(0),a(1,"H\xE3y nh\u1EADp ti\xEAu \u0111\u1EC1!"),v())}function Ge(r,s){if(r&1&&C(0,$e,2,0,"ng-container",32),r&2){let t=s.$implicit;p("ngIf",t.hasError("required"))}}function je(r,s){if(r&1&&(i(0,"form",25)(1,"nz-form-item")(2,"nz-form-label",26),a(3,"T\xEAn danh m\u1EE5c"),n(),i(4,"nz-form-control",27),h(5,"input",28),C(6,He,1,1,"ng-template",null,29,E),n()(),i(8,"nz-form-item")(9,"nz-form-label",26),a(10,"Ti\xEAu \u0111\u1EC1"),n(),i(11,"nz-form-control",27),h(12,"input",30),C(13,Ge,1,1,"ng-template",null,31,E),n()()()),r&2){let t=g(7),e=g(14),l=d();p("formGroup",l.categoryForm),m(2),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",t),m(5),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",e)}}function qe(r,s){if(r&1){let t=D();i(0,"button",20),u("click",function(){f(t);let l=d();return z(l.handleCancel())}),a(1,"H\u1EE7y"),n(),i(2,"button",33),u("click",function(){f(t);let l=d();return z(l.handleOk())}),a(3),n()}if(r&2){let t=d();m(2),p("nzLoading",t.isConfirmLoading)("disabled",!t.categoryForm.valid),m(1),S(" ",t.isEdit?"C\u1EADp nh\u1EADt":"X\xE1c nh\u1EADn"," ")}}var St=(()=>{let s=class s{constructor(e,l,o,c){this.categoriesService=e,this.message=l,this.fb=o,this.title=c,this.categories=[],this.fileUrl="",this.editId="",this.searchValue="",this.isEdit=!1,this.isVisible=!1,this.isConfirmLoading=!1,this.visibleSearch=!1,this.data={name:"",title:""},this.categoriesFilter=[...this.categories],this.categoryForm=this.fb.group({catName:["",U.required],title:[""]})}ngOnInit(){this.title.setTitle("Danh m\u1EE5c | Grocery Coffee"),this.loadCategories(),this.reset()}createCategory(e){this.categoriesService.createCategory(e).subscribe(()=>{this.categories=[...this.categories],this.message.success("T\u1EA1o m\u1EDBi th\xE0nh c\xF4ng. \u0110\xE3 th\xEAm danh m\u1EE5c n\xE0y v\xE0o danh s\xE1ch"),this.loadCategories()})}updateCategory(e,l){this.categoriesService.updateCategory(l,e).subscribe(()=>{this.categories=this.categories.map(o=>o._id===l?x(x({},o),e):o)})}delete(e){this.categoriesService.deleteCategory(e).subscribe(()=>{this.categories=this.categories.filter(l=>l.id!==e),this.message.success("X\xF3a th\xE0nh c\xF4ng"),this.loadCategories()})}loadCategories(){this.categoriesService.getCategories().subscribe(e=>{this.categories=e.data})}toggleActive(e){e.status=!e.status,this.updateCategory(e,e._id)}showModal(){this.isVisible=!0}patchValue(e){this.isEdit=!0,this.editId=e._id,this.categoryForm.patchValue({catName:e.name}),this.categoryForm.patchValue({title:e.title}),this.showModal()}handleOk(){this.isConfirmLoading=!0,setTimeout(()=>{this.isVisible=!1,this.isConfirmLoading=!1,this.submitForm()},1e3)}handleCancel(){this.isVisible=!1,this.isEdit&&(this.isEdit=!1),this.categoryForm.reset()}submitForm(){this.data.name=this.categoryForm.value.catName,this.data.title=this.categoryForm.value.title,this.isEdit?(this.updateCategory(this.data,this.editId),this.message.success("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng")):this.createCategory(this.data),this.categoryForm.reset(),this.isEdit=!1}OnChange(e){console.log(e.file)}reset(){this.searchValue="",this.search()}search(){this.visibleSearch=!1,this.categoriesFilter=this.categories.filter(e=>e.name.toLowerCase().indexOf(this.searchValue.toLowerCase())!==-1)}};s.\u0275fac=function(l){return new(l||s)(b(Ce),b(j),b(Z),b(O))},s.\u0275cmp=N({type:s,selectors:[["app-dashboard-category"]],standalone:!0,features:[V],decls:38,vars:10,consts:[["nz-button","","nzType","primary",3,"click"],["ngSkipHydration","",3,"nzData"],["basicTable",""],["nzCustomFilter",""],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],[4,"ngFor","ngForOf"],[3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","T\xECm t\xEAn",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["width","70px",3,"src","alt"],[2,"vertical-align","middle"],[3,"switchValue","click"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nzType","vertical"],["nz-button","","nzType","primary","nzDanger","","nz-popconfirm","","nzPopconfirmTitle","B\u1EA1n ch\u1EAFc ch\u1EE9?","nzOkText","x\xE1c nh\u1EADn","nzCancelText","h\u1EE7y",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","catName","placeholder","Nh\u1EADp t\xEAn danh m\u1EE5c"],["userErrorTpl",""],["nz-input","","formControlName","title","placeholder","Nh\u1EADp ti\xEAu \u0111\u1EC1"],["userErrorTpl2",""],[4,"ngIf"],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"]],template:function(l,o){if(l&1&&(i(0,"button",0),u("click",function(){return o.showModal()}),a(1,` + Th\xEAm danh m\u1EE5c
`),n(),i(2,"nz-table",1,2)(4,"thead")(5,"tr")(6,"th"),a(7,"H\xECnh \u1EA3nh"),n(),i(8,"th",3),a(9," T\xEAn "),i(10,"nz-filter-trigger",4),u("nzVisibleChange",function(_){return o.visibleSearch=_}),h(11,"span",5),n()(),i(12,"th"),a(13,"Ti\xEAu \u0111\u1EC1"),n(),i(14,"th"),a(15,"S\u1EA3n ph\u1EA9m"),n(),i(16,"th"),a(17,"Tr\u1EA1ng th\xE1i"),n(),i(18,"th"),a(19,"Ch\u1EE9c n\u0103ng"),n()()(),i(20,"tbody"),C(21,Le,20,6,"tr",6),n()(),i(22,"nz-modal",7),u("nzVisibleChange",function(_){return o.isVisible=_})("nzOnCancel",function(){return o.handleCancel()}),C(23,Re,1,1,"ng-template",null,8,E)(25,je,15,7,"ng-template",null,9,E)(27,qe,4,3,"ng-template",null,10,E),n(),i(29,"nz-dropdown-menu",null,11)(31,"div",12)(32,"div",13)(33,"input",14),u("ngModelChange",function(_){return o.searchValue=_}),n(),i(34,"button",15),u("click",function(){return o.search()}),a(35," T\xECm ki\u1EBFm "),n(),i(36,"button",16),u("click",function(){return o.reset()}),a(37,"\u0110\u1EB7t l\u1EA1i"),n()()()()),l&2){let c=g(3),_=g(24),ke=g(26),Oe=g(28),Ie=g(30);m(2),p("nzData",o.categories),m(8),p("nzVisible",o.visibleSearch)("nzActive",o.searchValue.length>0)("nzDropdownMenu",Ie),m(11),p("ngForOf",c.data),m(1),p("nzVisible",o.isVisible)("nzTitle",_)("nzContent",ke)("nzFooter",Oe),m(11),p("ngModel",o.searchValue)}},dependencies:[A,F,w,Ne,ve,ye,be,xe,Se,Te,De,Ee,ze,ee,K,q,X,W,J,Ve,Me,P,I,_e,ne,H,B,L,R,we,Fe,fe,te,Q,Y,he,de,ge,ce,oe,re,le,ae,me,se,ue,pe,G,$,Ae],styles:["nz-table[_ngcontent-%COMP%]{margin-top:1.6rem}.search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px}"]});let r=s;return r})();export{St as DashboardCategoryComponent};

<div class="header">
  <div class="container">
    <div class="top-bar">
      <!-- More -->
      <button
        class="top-bar__more d-none d-lg-block js-toggle"
        (click)="navMobile = !navMobile"
        toggle-target="#navbar"
      >
        <img
          src="../../../assets/images/icon/more.svg"
          alt=""
          class="icon top-bar__more-icon"
        />
      </button>

      <!-- Logo -->
      <a [routerLink]="'/homepage'" class="logo top-bar__logo">
        <img
          src="../../../assets/images/logo/logo.png"
          alt="grocerycoffee"
          class="logo__img top-bar__logo-img"
        />
        <h1 class="logo__title top-bar__logo-title">grocerycoffee</h1>
      </a>

      <!-- Navbar -->
      <nav id="navbar" [class]="!navMobile ? 'navbar hide' : 'navbar show'">
        <button
          class="navbar__close-btn js-toggle"
          (click)="navMobile = !navMobile"
          toggle-target="#navbar"
        >
          <img
            class="icon"
            src="../../../assets/images/icon/arrow-left.svg"
            alt=""
          />
        </button>

        <a [routerLink]="['/checkout']" class="nav-btn d-none d-md-flex">
          <img
            src="../../../assets/images/other/Buy.png"
            alt=""
            class="nav-btn__icon icon"
          />
          <span class="nav-btn__title">Cart</span>
          <span class="nav-btn__qnt"
            >{{ subTotal || 0 | currency : " " : "symbol" : "1.0-0" }}đ</span
          >
        </a>
      </nav>
      <div
        class="navbar__overlay js-toggle"
        (click)="navMobile = !navMobile"
        toggle-target="#navbar"
      ></div>

      <!-- Logged -->
      <!-- Actions -->
      <ng-container *ngIf="isAuthenticated; else unLoggedTpml">
        <div class="top-act">
          <div class="top-act__group d-md-none top-act__group--single">
            <button class="top-act__btn">
              <img
                src="../../../assets/images/other/Search.png"
                alt=""
                class="icon top-act__icon"
              />
            </button>
          </div>

          <div class="top-act__group d-md-none">
            <!-- <div class="top-act__btn-wrap">
              <button class="top-act__btn" [routerLink]="['favourite-list']">
                <img
                  src="../../../assets/images/icon/heart.svg"
                  alt=""
                  class="icon top-act__icon"
                />
                <span class="top-act__title">{{
                  userLoggedIn?.favourites?.length || 0
                }}</span>
              </button>

              <div class="act-dropdown">
                <app-favourite-list></app-favourite-list>
              </div>
            </div>

            <div class="top-act__separate"></div> -->

            <div class="top-act__btn-wrap">
              <button class="top-act__btn" [routerLink]="['checkout']">
                <img
                  src="../../../assets/images/other/Buy.png"
                  alt=""
                  class="icon top-act__icon"
                />
                <span class="top-act__title">
                  {{
                    subTotal || 0 | currency : " " : "symbol" : "1.0-0"
                  }}đ</span
                >
              </button>

              <!-- Dropdown -->
              <div class="act-dropdown">
                <app-cart-list [cart]="cart"></app-cart-list>
              </div>
            </div>
          </div>

          <div class="top-act__user">
            <img
              [src]="
                userLoggedIn?.avatarUrl ||
                '../../../assets/images/avatar/user.jpg'
              "
              [alt]="userLoggedIn?.fullName"
              class="top-act__avatar"
            />

            <!-- Dropdown -->
            <div class="act-dropdown top-act__dropdown">
              <div class="act-dropdown__inner user-menu">
                <img
                  src="../../../assets/images/icon/arrow-up.png"
                  alt=""
                  class="act-dropdown__arrow top-act__dropdown-arrow"
                />

                <div class="user-menu__top">
                  <img
                    [src]="
                      userLoggedIn?.avatarUrl ||
                      '../../../assets/images/avatar/user.jpg'
                    "
                    alt=""
                    class="user-menu__avatar"
                  />
                  <div>
                    <p class="user-menu__name">{{ userLoggedIn?.fullName }}</p>
                    <p>{{ userLoggedIn?.username }}</p>
                  </div>
                </div>

                <ul class="user-menu__list">
                  <li>
                    <a [routerLink]="['/personal-info']" class="user-menu__link"
                      >Hồ sơ</a
                    >
                  </li>
                  <li>
                    <a
                      [routerLink]="['/personal-info/edit-profile']"
                      class="user-menu__link"
                      >Cài đặt</a
                    >
                  </li>
                  <li class="user-menu__separate">
                    <a
                      [routerLink]="['/sign-in']"
                      (click)="logout()"
                      class="user-menu__link"
                      >Đăng xuất</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <!-- Unlog -->
      <!-- Actions -->
      <ng-template #unLoggedTpml>
        <div class="top-act">
          <a [routerLink]="['/sign-in']" class="btn btn--text d-md-none"
            >Đăng nhập</a
          >
          <a
            [routerLink]="['/sign-up']"
            class="top-act__sign-up btn btn--primary"
            >Đăng ký</a
          >
        </div>
      </ng-template>
    </div>
  </div>
</div>

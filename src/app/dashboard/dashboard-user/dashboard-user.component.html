<button nz-button nzType="primary" (click)="showModal()">
  + Thêm người dùng
</button>
<nz-table ngSkipHydration #basicTable [nzData]="users">
  <thead>
    <tr>
      <th>Avatar</th>
      <th>Họ và tên</th>
      <th>Tài khoản</th>
      <th>Ngày tạo</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of basicTable.data">
      <td>
        <img
          [src]="data?.avatarUrl || '../../../assets/images/avatar/user.jpg'"
          [alt]="data?.name"
          width="50px"
          height="50px"
          style="border-radius: 999px"
        />
      </td>
      <td style="vertical-align: middle">{{ data?.fullName }}</td>
      <td style="vertical-align: middle">
        {{ data?.username }}
      </td>
      <td style="vertical-align: middle">{{ data?.createdAt | date }}</td>
      <td style="vertical-align: middle">
        {{ data?.role }}
      </td>
    </tr>
  </tbody>
</nz-table>

<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="modalTitle"
  [nzContent]="modalContent"
  [nzFooter]="modalFooter"
  (nzOnCancel)="handleCancel()"
>
  <ng-template #modalTitle>Thêm người dùng</ng-template>

  <ng-template #modalContent>
    <form nz-form [formGroup]="userForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>Email</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="userErrorTpl">
          <input
            nz-input
            formControlName="username"
            type="email"
            placeholder="Nhập email"
          />
          <ng-template #userErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')"
              >Hãy điền email người dùng!</ng-container
            >
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>Mật khẩu</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="passErrorTpl">
          <input
            nz-input
            formControlName="password"
            type="password"
            placeholder="Nhập mật khẩu"
          />
          <ng-template #passErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')"
              >Hãy điền mật khẩu người dùng!</ng-container
            >
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>Họ và tên</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="userErrorTpl">
          <input
            nz-input
            formControlName="fullName"
            placeholder="Nhập họ và tên"
          />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>Role</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="userErrorTpl">
          <nz-select ngModel="lucy" formControlName="role">
            <nz-option nzValue="ADMIN" nzLabel="ADMIN"></nz-option>
            <nz-option nzValue="GUEST" nzLabel="GUEST"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-template>
  <ng-template #modalFooter>
    <button nz-button nzType="default" (click)="handleCancel()">Hủy</button>
    <button
      nz-button
      nzType="primary"
      (click)="handleOk()"
      [nzLoading]="isConfirmLoading"
      [disabled]="!userForm.valid"
    >
      Xác nhận
    </button>
  </ng-template>
</nz-modal>
